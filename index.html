<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Randomize</title>
</head>
<body>

<script type="text/javascript">

// define random pages url, per themes
var randomPages = [];

randomPages["grands-changements"] =
  ["https://bit.ly/1LTRXzT",
  "https://stanford.io/2e0yBO7",
  "https://bit.ly/2ii1J3s",
  "https://mck.co/2N642F6",
  "https://bit.ly/2EIApVw",
  "https://bit.ly/2XaR3Xi",
  "https://www.youtube.com/watch?v=NeLokJmM-ns",
  "https://www.youtube.com/watch?v=d4TJ4NY1IA0",
  "https://www.youtube.com/watch?v=ZGGDKC3GlrI",
  "https://www.youtube.com/watch?v=iDgT__5MS8Q",
  "https://www.youtube.com/watch?v=iscwuujSr_8&t=110s",
  "https://www.youtube.com/watch?v=2pp17E4E-O8",
  "https://bit.ly/2GP2deA",
  "https://bit.ly/2GLSTYW",
  "https://bbc.in/2NjcUrn",
  "http://observatory.tec.mx",
  "https://bit.ly/1hHuwba",
  "https://bit.ly/2trbamD",
  "https://bit.ly/2A9ihTA"];

randomPages["leadership"] = 
  ["https://bit.ly/1lGoUOr",
  "https://bit.ly/2zWxhVJ",
  "https://bit.ly/2HW7yyk",
  "https://bit.ly/2sEg7s5",
  "http://artofhosting.org/fr",
  "https://www.francetvinfo.fr/sciences/sciences-comment-prend-on-une-decision_2145496.html",
  "https://bit.ly/2TeEBqG",
  "https://bit.ly/2EhenLW",
  "https://bit.ly/2GPeUpU",
  "https://bit.ly/17l4aKp",
  "https://bit.ly/2S9T1Dy",
  "https://bit.ly/2GNm3qS",
  "https://bit.ly/2HqFwhB",
  "https://bit.ly/2QAjnOX",
  "https://bit.ly/2PA95hc"
  ];

randomPages["creativite"] = 
  ["https://www.youtube.com/watch?v=4AoZ_VnXfh4",
  "https://bit.ly/2GupIKT",
  "https://www.youtube.com/watch?v=VPbjSnZnWP0",
  "https://bit.ly/2GUD5DB",
  "youtu.be/2FA-IuDTMjE",
  "http://fr-fr.facebook.com/groups/VirtualityForReality",
  "https://bit.ly/2tsD69O"
  ];
  
randomPages["impact"] = 
  ["https://bit.ly/2SZrR6Z",
  "https://bit.ly/2EgC07h",
  "https://bit.ly/2Njeolr",
  "https://activer-economie-circulaire.com/podcast",
  "https://www.marseille-solutions.fr/solutions",
  "https://www.youtube.com/watch?v=56EQCSlp8e4",
  "https://bit.ly/1PkGF70",
  "https://bit.ly/1QVx1JD",
  "https://bit.ly/2EhpunW",
  "https://bit.ly/2fadW75"
  ];

randomPages["dd"] = 
  ["https://journey.circularamsterdam.com/circularamsterdam#173727",
  "http://materialfinite.com/",
  "https://usbeketrica.com/article/tom-szaky-25-multinationales-zero-dechet",
  "https://www.huffingtonpost.fr/2019/01/28/pour-passer-au-zero-dechet-danone-carrefour-et-coca-vont-proposer-un-service-de-consigne_a_23654619",
  "https://madeinmarseille.net/43672-trottinette-electrique-libre-service/",
  "https://www.novethic.fr/actualite/environnement/climat/isr-rse/infographie-interdiction-d-acheter-une-voiture-neuve-ou-de-prendre-un-long-courrier-couvre-feu-thermique-quotas-sur-les-produits-importes-les-mesures-chocs-pour-rester-sous-1-5-c-146877.html",
  "https://www.lebonbon.fr/paris/healthy/the-naked-shop-l-adresse-ideale-pour-passer-au-zero-dechet/",
  "https://www.youtube.com/watch?v=7saOOyc5opE",
  "https://www.facebook.com/franceinfovideo/videos/vb.266677330042439/252944415612437/?type=2&theater"
  ];
  
//Get url parameter "theme"
var theme = getURLParameter('theme');

//Get possible themes
var possibleThemes = getArrayKeys(randomPages,'array');

// check parameter value
if (!possibleThemes.includes(theme)) {
  //TODO value = donner l'exemple d'une url
  document.write("Merci de préciser un paramètre 'theme' dans l'url avec une des valeurs suivantes : " + getArrayKeys(randomPages,'string'));
}else {
  //check if theme exists
  if (randomPages[theme] === undefined) {
      document.write("Le paramètre utilisé n'est pas reconnu, merci d'utiliser les valeurs suivantes :" + getArrayKeys(randomPages,'string'));
  }else{
    //theme and data exists, redirection to random
    var itemSelected = randomPages[theme][Math.floor(Math.random()*randomPages[theme].length)];
    if (itemSelected !== undefined) window.location.href = itemSelected;
  }
}




function getArrayKeys(array, returnMode) {

  if(returnMode == "string") {var data = "<ul>"} else {var data = []};

  for(var key in array) {
    if(array.hasOwnProperty(key)) {
      if(returnMode == "string") {data += '<li><a href="'+ addParameterToURL("theme", key)+'">'+ key + '</a></li>'} else {data.push(key)};
    }
  }

  if(returnMode == "string") { data += "</ul>";}

  return data;
}

function getURLParameter(name) {
  return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [null, ''])[1].replace(/\+/g, '%20')) || null;
}

function addParameterToURL(param, value){
    var url = location.href;
    url += (url.split('?')[1] ? '&':'?') + param + "=" + value;
    return url;
}

</script>

</body>
</html>
